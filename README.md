# Проект: Игра-бот по серии книг о Гарри Поттере от Дж. Роулинг


План проекта:
1. Предобработка текста книг о Гарри Поттере Дж. Роулинг и генерация новых предложений в стиле книг о Гарри Поттере.
2. Тестирование модели машинного обучения для классификации предложений. Проверка того, может ли она выявить оригинальнойсть предложения.
3. Создание игры-бота в Telegram, в которой пользователи и модели машинного обучения соревнуются в способности отличить оригинальный текст от сгенерированнного.

## 1. Подготовка и предобработка текста 
Исходный текст содержится в файле `harry_potter.txt`. Он был поделен на предложения, токинезирован и очищен от стоп-слов. Затем с помощью модели Word2Vec 25% слов в предложениях были заменены на синонимы. Из оргинальных и сгенерированных предложений были получены датасеты `hp_train.csv` и `hp_test.csv`.

## 2. Обучение модели 
С помошью полученных датасетов была обучена и протестирована модель классификации тектсов - Naive Bayes. Она показала accuracy = 0.7313. 
Предскаазания модели содержатся в файле `with_pred_hp.csv`.

Все этапе предобработки, генерации и обучения модели содержатся в файле `harry_potter_project.ipynb`.

## 3.Создание бота в Telegram
Сам бот: https://t.me/Harry_Potter_or_computer_bot.

Код бота содержится в фйле `first_bot.py`. 
В файле `users_data.csv` хранятся данные о пользователях (имя и их баллы).
В файле `with_pred_hp.csv` хранятся предложения и их классификация (original/generated), также хранится классификация от модели Naive Bayes.

Для запуска надо:
1. В файле `conf.py` вставить свой токен.
2. Скачать нужные библиотеки из файла `reguirements.txt`.
         В терминале:
         1) python3 -m venv venv
         2) source venv/bin/activate
         3) pip install -r reguirements.txt

## Как работает бот
1. Чтобы бот начала работу надо нажать в меню на /start.
2. Затем бот отправляет сообщение, которое объясняет задание. После этого сообщения пользователь может выбрать кнопку либо "Начать игру", либо "Показать топ-10 игроков".
3.  Если пользователь нажмет на "Показать топ-10 игроков", то бот отправит сообщение топ-10 участников по баллам. Пользователь потом сможет нажать на "Начать игру" или повторно на "Показать топ-10 игроков", чтобы посмотреть обнавленный топ-10.
4. Если пользователь нажмет на "Начать игру", то ему бот отправит рандомное предложение. Появятся кнопки "Оригинал" и "Сгенерирован". Пользователь должен угадать сгенерировано ли предложение или нет. После того, как пользователь выберет ответ, бот отправит сообщение, где напишет "Верно!" или "Не угалали!". Также с пользователем параллельно играет модель Naive Bayes. После ответа пользователя бот также выведет угалала ли модель Naive Bayes.
5. Всего будет 10 предложений за одну игру. В конце игры определяется победитель (пользователь или модель Naive Bayes). Потом появляются кнопки "Сыграть еще раз" и "Показать топ-10 игроков". Если нажать на кнопку "Сыграть еще раз", то бот начнет отправлять рандомные предложения. Если нажать на на кнопку "Показать топ-10 игроков", то бот отправит сообщение топ-10 участников по баллам.
